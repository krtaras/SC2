!function(){"use strict";var a=angular.module("sound-cloud-player"),b="HomeTabController",c=chrome.extension.getBackgroundPage().APIHelper,d=chrome.extension.getBackgroundPage().SCHelper;a.controller(b,[function(){var a=this;this.searchText="",this.onenter=function(b){13===b.which&&a.search()},this.search=function(){var d=angular.element($("#list")).scope().itemsController;d.setItems(c.searchSounds(a.searchText,function(a){var c=[];for(var d in a)c.push(b(a[d],!1));return c}))},this.stream=function(){var a=angular.element($("#list")).scope().itemsController;a.setItems(c.getMyActivities(function(a){var d=[];for(var f in a){var g=a[f];if(g.type.includes("track"))g.origin&&d.push(b(g.origin,!1));else if("playlist"==g.type){var h=e(g);h.static=!1,c.getSoundsFromPlayList(h,function(a,c){for(var d in c)a.sounds.push(b(c[d],!0))}),d.push(h)}}return d}))},this.getCharts=function(){var a=angular.element($("#list")).scope().itemsController;a.setItems(c.getCharts(function(a){var c=[];for(var d in a){var e=a[d].track;e&&c.push(b(e,!1))}return c}))};var b=function(a,b){return d.buildSoundObject(a,b)},e=function(a){return d.buildPlayListObject(a.origin)}}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="ItemsController",c=chrome.extension.getBackgroundPage().Player,d=chrome.extension.getBackgroundPage().APIHelper,e=chrome.extension.getBackgroundPage().SCHelper;a.controller(b,["$interval",function(a){var b=this,f=-1,g=!0;this.likedTracksIds=[],this.likedPlayListsIds=[],this.currentUser,this.sound,this.playlist,this.list=[],this.init=function(){if(c.customProperty.activeTabName==chrome.extension.getBackgroundPage().PlayerHelper.view.activeTabName){this.construct();var d=a(function(){b.sound.id!=f&&(e.scrollToSound($("#list"),b.sound.id,b.sound.inPlaylist,b.playlist.id),f=b.sound.id)},1e3);$("#list").on("$destroy",function(){a.cancel(d)})}},this.construct=function(){this.currentUser=d.currentUser,this.sound=c.sound,this.playlist=c.playList,this.list=c.getItemsList()},this.setItems=function(a){e.drawObjects($("#loading"),a.then(function(a){return b.list=a,g=!1,d.currentUser.scUser&&(d.getMyLikedTracksIds(function(a){for(var c in b.list)if("sound"==b.list[c].type)b.list[c].marked=jQuery.inArray(b.list[c].id,a)!=-1;else for(var d in b.list[c].sounds)b.list[c].sounds[d].marked=jQuery.inArray(b.list[c].sounds[d].id,a)!=-1}),d.getMyLikedPlayListsIds(function(a){for(var c in b.list)"playlist"==b.list[c].type&&(b.list[c].marked=jQuery.inArray(b.list[c].id,a)!=-1)})),!0}))},this.playSound=function(a,b){g||(c.setItems(this.list,!0),g=!0,c.customProperty.activeTabName=chrome.extension.getBackgroundPage().PlayerHelper.view.activeTabName,this.init()),b==-1?c.playSoundById(a):c.playSoundFromPlayListById(a,b)},this.doLikeTrack=function(a){h(a,!0),c.setLikeForSound(a,!0),d.doLikeTrack(a,function(a){})},this.doUnLikeTrack=function(a){h(a,!1),c.setLikeForSound(a,!1),d.doUnLikeTrack(a,function(a){})},this.doLikePlaylist=function(a){i(a,!0),c.setLikeForPlaylist(a,!0),d.doLikePlaylist(a,function(a){})},this.doUnLikePlaylist=function(a){i(a,!1),c.setLikeForPlaylist(a,!1),d.doUnLikePlaylist(a,function(a){})},this.goToSoundCloudTrack=function(a){d.getTrackPermalinkURL(a)},this.goToSoundCloudPlayList=function(a){d.getPlayListPermalinkURL(a)},this.getDownloadUrl=function(a){return d.getTrackURL(a)},this.normalizeString=function(a){return a?a.replace(/ /g,"_"):""};var h=function(a,c){var d=b.list;for(var e in d){var f=d[e];if("sound"==f.type&&f.id==a&&(f.marked=c),"playlist"==f.type){var g=f.sounds;for(var h in g)g[h].id==a&&(g[h].marked=c)}}},i=function(a,c){var d=b.list;for(var e in d){var f=d[e];"playlist"==f.type&&f.id==a&&(f.marked=c)}}}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="LoginController",c=chrome.extension.getBackgroundPage().APIHelper;a.controller(b,["$scope",function(a){a.skip=function(){c.loginAsGuest()},a.signIn=function(){c.connect()}}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="PlayerController",c=chrome.extension.getBackgroundPage().Player,d=chrome.extension.getBackgroundPage().PlayerHelper;a.controller(b,["$interval",function(a){function b(){c.state.isMute?f.volumeIcon="volume_off":c.state.volume>50?f.volumeIcon="volume_up":0==c.state.volume?f.volumeIcon="volume_mute":f.volumeIcon="volume_down"}function e(){var a=c.customProperty.activeTabName;if(a)switch(a){case d.tabsList.tracksTabName:f.openTracksTab();break;case d.tabsList.playListsTabName:f.openPlayListTab();break;case d.tabsList.settingsTabName:f.openSettingsTab();break;default:f.openHomeTab()}}var f=this;this.view=d.view,this.tabsList=d.tabsList,this.player=c,this.volumeIcon="",this.changePlayerViewMode=function(){d.view.isMinimized?d.maximize():d.minimize()},this.toggleTabs=function(){d.view.isTabsOpened?d.closeTabs():d.openTabs()},this.openHomeTab=function(){d.openHomeTab()},this.openTracksTab=function(){d.openTracksTab()},this.openPlayListTab=function(){d.openPlayListTab()},this.openSettingsTab=function(){d.openSettingsTab()},this.muteVolume=function(){c.mute(),b()},this.updateVolume=function(){c.setVolume(c.state.volume),c.state.isMute=!1,b()},this.updatePosition=function(){c.setPosition(c.sound.position)},this.play=function(){c.state.onPause?c.toggle():c.play()},this.stop=function(){c.stop()},this.toggle=function(){c.toggle()},this.next=function(){c.next()},this.prev=function(){c.prev()},this.replay=function(){c.play()},this.toggleRandom=function(){c.toggleRandomPlaying()},this.windowMode=function(){var a=chrome.extension.getURL("window_mode.html");chrome.windows.create({url:a,type:"popup",width:370,height:120}),window.close()},b(),e(),a(function(){},0)}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="PlayListTabController",c=chrome.extension.getBackgroundPage().APIHelper,d=chrome.extension.getBackgroundPage().SCHelper;a.controller(b,[function(){this.myPlaylists=function(){var b=angular.element($("#list")).scope().itemsController;b.setItems(c.getMyPlaylists(function(b){var c=[];for(var d in b){var e=b[d];a(e,c)}return c}))},this.favoritesPlaylists=function(){var b=angular.element($("#list")).scope().itemsController;b.setItems(c.getMyFavoritePlaylists(function(b){var c=[];for(var d in b){var e=b[d].playlist;e&&a(e,c)}return c}))};var a=function(a,c){var d=e(a),f=a.tracks;if((!d.art||""==d.art)&&f.length>0){var g=f[0];(g.artwork_url||""!=g.artwork_url)&&(d.art=g.artwork_url)}for(var h in f){var i=f[h];i.artwork_url&&""!=i.artwork_url||(i.artwork_url=d.art),d.sounds.push(b(i,!0))}c.push(d)},b=function(a,b){return d.buildSoundObject(a,b)},e=function(a){return d.buildPlayListObject(a)}}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="SettingsController",c=chrome.extension.getBackgroundPage().Settings;a.controller(b,[function(){this.notification=c.notification,this.tracksSize=c.tracksSize,this.save=function(){c.save(this.tracksSize,this.notification)},this.setDefault=function(){c.backToDefault(),window.close()},this.logout=function(){c.terminate(),window.close()}}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="StateController",c=chrome.extension.getBackgroundPage().APIHelper;a.controller(b,["$scope",function(a){a.currentUser=c.currentUser,a.loginPage="/extension/app/view/login.html",a.playerPage="/extension/app/view/player.html"}])}(),function(){"use strict";var a=angular.module("sound-cloud-player"),b="TracksTabController",c=chrome.extension.getBackgroundPage().APIHelper,d=chrome.extension.getBackgroundPage().SCHelper;a.controller(b,[function(){this.myTracks=function(){var b=angular.element($("#list")).scope().itemsController;b.setItems(c.getMyTracks(function(b){var c=[];for(var d in b)c.push(a(b[d],!1));return c}))},this.favorites=function(){var b=angular.element($("#list")).scope().itemsController;b.setItems(c.getMyFavorites(function(b){var c=[];for(var d in b)c.push(a(b[d],!1));return c}))};var a=function(a,b){return d.buildSoundObject(a,b)}}])}();